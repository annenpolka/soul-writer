meta:
  agent: section
  version: 1

system:
  sections:
    - type: condition
      if:
        has: developedCharacters
      then:
        - type: heading
          heading: 登場人物（本作品用）
        - type: each
          each: developedCharacters
          as: char
          sections:
            - type: heading
              heading: "{{ char.displayName }}"
              level: 3
            - type: text
              text: "- 役割: {{ char.role }}"
            - type: condition
              if:
                has: char.description
              then:
                - type: text
                  text: "- 背景: {{ char.description }}"
            - type: condition
              if:
                has: char.voice
              then:
                - type: text
                  text: "- 口調: {{ char.voice }}"
        - type: condition
          if:
            has: enrichedCharacterDetails
          then:
            - type: heading
              heading: 身体の癖とテーマへの態度
              level: 3
            - type: each
              each: enrichedCharacterDetails
              as: cd
              template: "- {{ cd.name }}: {{ cd.habits }} [態度: {{ cd.stanceType }}（{{ cd.stanceManifestation }}）]"
        - type: text
          text: "上記の人物を参考にしつつ、必要に応じて新しい人物を自由に追加してよい。既存人物の登場は必須ではない。ただし既存人物を使う場合はその性格・口調を尊重すること。"
      else:
        - type: heading
          heading: キャラクター
        - type: each
          each: worldBibleCharacters
          as: char
          sections:
            - type: heading
              heading: "{{ char.name }}"
              level: 3
            - type: text
              text: "- 役割: {{ char.role }}"
            - type: condition
              if:
                has: char.traits
              then:
                - type: text
                  text: "- 特徴: {{ char.traits | join: \", \" }}"
            - type: condition
              if:
                has: char.speech_pattern
              then:
                - type: text
                  text: "- 話し方: {{ char.speech_pattern }}"

user:
  sections: []
